/* Trigger to calculate heart disease risk ratio on updated patient cholesterol readings */

DROP TRIGGER CALC_HEART_RISK_RATIO_UPDATE;

CREATE TRIGGER CALC_HEART_RISK_RATIO_UPDATE
AFTER UPDATE ON PATIENT_CHOLESTEROL
FOR EACH ROW
BEGIN
    UPDATE PATIENT_CHOLESTEROL
    SET
        CalculatedRatio = (NEW.Hdl + NEW.Ldl + (0.2 * NEW.Triglycerides)) / NEW.Hdl
    WHERE ReadingNo = NEW.ReadingNo;
END;