/* Trigger to make sure an updated Contract's EmpNo has an EmpType of 'SURG' */

DROP TRIGGER CHECK_CONTRACT_EMP_UPDATE;

CREATE TRIGGER CHECK_CONTRACT_EMP_UPDATE
BEFORE UPDATE ON SURG_CONTRACT
FOR EACH ROW
WHEN NOT EXISTS (
    SELECT 1 FROM STAFF WHERE EmpNo = NEW.EmpNo AND EmpType = 'SURG'
)
BEGIN
    SELECT RAISE (ABORT, 'The selected Employee must be a Surgeon.');
END;