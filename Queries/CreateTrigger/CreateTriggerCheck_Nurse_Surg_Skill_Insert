/* Trigger to make sure a newly inserted Nurse Surgery Skill has an EmpType of 'NURS'*/

DROP TRIGGER CHECK_NURSE_SURG_SKILL_INSERT;

CREATE TRIGGER CHECK_NURSE_SURG_SKILL_INSERT
BEFORE INSERT ON NURSE_SURG_SKILL
FOR EACH ROW
WHEN NOT EXISTS (
    SELECT 1 FROM STAFF WHERE EmpNo = NEW.EmpNo AND EmpType = 'NURS'
)
BEGIN
    SELECT RAISE (ABORT, 'The selected employee must be a Nurse.');
END;