/* Trigger to make sure that a newly added surgery type and surgery skill combination is not duplicated */

DROP TRIGGER CHECK_SURG_TYPE_SKILL_DUP_INSERT;

CREATE TRIGGER CHECK_SURG_TYPE_SKILL_DUP_INSERT
BEFORE INSERT ON SURG_TYPE_SKILL
FOR EACH ROW
WHEN EXISTS (
    SELECT 1 FROM SURG_TYPE_SKILL WHERE Type = NEW.Type AND Skill = NEW.Skill
)
    BEGIN
        SELECT RAISE(ABORT, 'The selected Type and Skill combination already exists.');
    END;