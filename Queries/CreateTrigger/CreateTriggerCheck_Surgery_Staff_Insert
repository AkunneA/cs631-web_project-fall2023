/* Trigger to make sure a newly inserted surgery staff assignment has an EmpType of 'SURG' or 'NURS' */

DROP TRIGGER CHECK_SURGERY_STAFF_INSERT;

CREATE TRIGGER CHECK_SURGERY_STAFF_INSERT
BEFORE INSERT ON SURGERY_STAFF
FOR EACH ROW
WHEN NOT EXISTS (
    SELECT 1 FROM STAFF WHERE EmpNo = NEW.EmpNo AND (EmpType = 'SURG' OR EmpType = 'NURS')
)
BEGIN
    SELECT RAISE (ABORT, 'The selected employee must be a Surgeon or Nurse.');
END;