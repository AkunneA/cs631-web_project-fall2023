/* Trigger to populate Room code on new row add */

DROP TRIGGER SET_BED_CODE;

DELIMITER //
CREATE TRIGGER SET_BED_CODE
AFTER INSERT ON BED
FOR EACH ROW
BEGIN

    DECLARE Clinic VARCHAR(50);
    DECLARE Wing VARCHAR(5);
    DECLARE NurseUnit INT;
    DECLARE RoomNo INT;
    DECLARE Bed CHAR;
    DECLARE Code VARCHAR(100);

    SET Clinic = NEW.Clinic;
    SET Wing = NEW.Wing;
    SET NurseUnit = NEW.NurseUnit;
    SET RoomNo = NEW.RoomNo;
    SET Bed = NEW.Bed;

    SET Code = CONCAT(Clinic, '-', Wing, '-', NurseUnit, '-', RoomNo, '-', Bed);

    INSERT INTO BED_CODE (Code)
    VALUES (Code);

END;
//
DELIMITER ;